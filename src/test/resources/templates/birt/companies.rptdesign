<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1">
    <property name="createdBy">Eclipse BIRT Designer Version 4.18.0.v202411161754</property>
    <text-property name="title">Companies Report</text-property>
    <parameters>
        <scalar-parameter name="companies" id="5"/>
    </parameters>
    <data-sources>
        <script-data-source name="CompanyDataSource" id="6"/>
    </data-sources>
    <data-sets>
        <script-data-set name="CompanyDtoList" id="7">
            <list-property name="resultSetHints">
                <structure>
                    <property name="position">0</property>
                    <property name="name">name</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">1</property>
                    <property name="name">code</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">directorName</property>
                    <property name="dataType">string</property>
                </structure>
            </list-property>
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">name</property>
                </structure>
                <structure>
                    <property name="columnName">code</property>
                </structure>
                <structure>
                    <property name="columnName">directorName</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">name</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">code</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">directorName</property>
                        <property name="dataType">string</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">CompanyDataSource</property>
            <method name="open"><![CDATA[

                importPackage(Packages.org.json);
                var companiesJson = new JSONArray(params['companies']);
                data = [];
                for (var i = 0; i < companiesJson.length(); i++) {
                    var company = companiesJson.getJSONObject(i);
                    data.push({
                        name: company.getString("name"),
                        code: company.getString("code"),
                        directorName: company.getJSONObject("director").getString("name")
                    });
                }
                index = 0;

            ]]></method>
            <method name="fetch"><![CDATA[

                if (index < data.length) {
                    row["name"] = data[index].name;
                    row["code"] = data[index].code;
                    row["directorName"] = data[index].directorName;
                    index++;
                    return true;
                }
                return false;

            ]]></method>
        </script-data-set>
    </data-sets>
    <page-setup>
        <simple-master-page name="NewSimpleMasterPage" id="2"/>
    </page-setup>
    <body>
        <label id="3">
            <property name="fontSize">24pt</property>
            <text-property name="text">Companies Report</text-property>
        </label>
        <list id="4">
            <property name="dataSet">CompanyDtoList</property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">Name</property>
                    <expression name="expression" type="javascript">dataSetRow["name"]</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">Code</property>
                    <expression name="expression" type="javascript">dataSetRow["code"]</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
                <structure>
                    <property name="name">Director</property>
                    <expression name="expression" type="javascript">dataSetRow["directorName"]</expression>
                    <property name="dataType">string</property>
                    <property name="allowExport">true</property>
                </structure>
            </list-property>
            <header>
                <data id="15">
                    <property name="fontSize">18pt</property>
                    <property name="fontWeight">bold</property>
                    <property name="resultSetColumn">Name</property>
                </data>
            </header>
            <detail>
                <grid id="18">
                    <property name="width">7.802083333333333in</property>
                    <column id="19">
                        <property name="width">1.1666666666666667in</property>
                    </column>
                    <column id="20">
                        <property name="width">2.3541666666666665in</property>
                    </column>
                    <column id="21">
                        <property name="width">4.28125in</property>
                    </column>
                    <row id="22">
                        <cell id="23">
                            <label id="34">
                                <property name="fontWeight">bold</property>
                                <text-property name="text">Code:</text-property>
                            </label>
                        </cell>
                        <cell id="24">
                            <data id="16">
                                <property name="resultSetColumn">Code</property>
                            </data>
                        </cell>
                        <cell id="25">
                            <property name="colSpan">1</property>
                            <property name="rowSpan">3</property>
                        </cell>
                    </row>
                    <row id="26">
                        <cell id="27">
                            <label id="35">
                                <property name="fontWeight">bold</property>
                                <text-property name="text">Director:</text-property>
                            </label>
                        </cell>
                        <cell id="28">
                            <data id="17">
                                <property name="resultSetColumn">Director</property>
                            </data>
                        </cell>
                    </row>
                    <row id="30">
                        <cell id="31"/>
                        <cell id="32"/>
                    </row>
                </grid>
            </detail>
        </list>
    </body>
</report>
